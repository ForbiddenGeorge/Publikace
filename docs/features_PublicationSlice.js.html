<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: features/PublicationSlice.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: features/PublicationSlice.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { createSlice } from '@reduxjs/toolkit';

//Slicer pro publikace
const publicationSlice = createSlice({
   /**
   * Slicer pro publikace.
   *
   * Vlastnosti:
   * - name (str): Název sliceru.
   * - initialState (array): Výchozí stav sliceru (prázdné pole).
   * - reducers (objekt): Reducery sliceru.
   */
  name: 'publications',
  initialState: [],
  reducers: {
    //načtení dat
    loadData: (state, action) => {
       /**
       * Reducer pro načtení dat.
       *
       * Parametry:
       * - state (array): Stav sliceru.
       * - action: Akce reduktoru obsahující payload s načtenými daty.
       */
      const publications = action.payload;
      publications.forEach((publication) => {
        const existingPublication = state.find((p) => p.id === publication.id);
        if (!existingPublication) {
          state.push(publication);
        }
      });
    },
    //Vložení nového autora který trigruje automaticky přerendrování
    InsertAuthor: (state, action) => {
      /**
       * Reducer pro vložení nového autora, který triggeruje automatické přerendrování.
       *
       * Parametry:
       * - state (array): Stav sliceru.
       * - action: Akce reduktoru obsahující payload s novým autorem a ID publikace.
       *
       * Vrací:
       * - array: Aktualizovaný stav sliceru s vloženým novým autorem.
       */
      const { author, publicationId } = action.payload;
      const updatedState = state.map((publication) => {
        if (publication.id === publicationId) {
          return {
            ...publication,
            authors: [...publication.authors, author],
          };
        }
        return publication;
      });
      return updatedState;
    },
    
    UpdateAuthorOrder: (state, action) => {
      /**
       * Reducer pro aktualizaci pořadí autora.
       *
       * Parametry:
       * - state (array): Stav sliceru.
       * - action: Akce reduktoru obsahující payload s ID publikace, ID autora a novým pořadím.
       *
       * Vrací:
       * - array: Aktualizovaný stav sliceru s aktualizovaným pořadím autora.
       */
      const { publicationId, authorId, newOrder } = action.payload;
      const publication = state.find((p) => p.id === publicationId);
      if (publication) {
        const updatedAuthors = publication.authors.map((author) =>
          author.id === authorId ? { ...author, order: newOrder } : author
        );
        return state.map((p) =>
          p.id === publicationId ? { ...p, authors: updatedAuthors } : p
        );
      }
      return state;
    },
    UpdateAuthorShare: (state, action) => {
      /**
       * Reducer pro aktualizaci podílu autora.
       *
       * Parametry:
       * - state (array): Stav sliceru.
       * - action: Akce reduktoru obsahující payload s ID publikace, ID autora a novým podílem.
       *
       * Vrací:
       * - array: Aktualizovaný stav sliceru s aktualizovaným podílem autora.
       */
      const { publicationId, authorId, newShare } = action.payload;
      const publication = state.find((p) => p.id === publicationId);
      if (publication) {
        const updatedAuthors = publication.authors.map((author) =>
          author.id === authorId ? { ...author, share: newShare } : author
        );
        return state.map((p) =>
          p.id === publicationId ? { ...p, authors: updatedAuthors } : p
        );
      }
      return state;
    },

    InsertPublication: (state, action) => {
      /**
       * Reducer pro vložení nové publikace.
       *
       * Parametry:
       * - state (array): Stav sliceru.
       * - action: Akce reduktoru obsahující payload s vybranou publikací.
       *
       * Vrací:
       * - array: Aktualizovaný stav sliceru s vloženou novou publikací.
       */
      const newPublication = action.payload.selectedPublication;
      //const publications = action.payload.publications;
    
      const existingPublication = state.find((publication) => publication.id === newPublication.id);
      if (!existingPublication) {
        state.push(newPublication);
      } else {
        console.log("There was a problem pushing the new publication..");
      }
    },
  },
});

export const { loadData, InsertAuthor, InsertPublication, UpdateAuthorOrder, UpdateAuthorShare } = publicationSlice.actions;

export default publicationSlice.reducer;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AddPublicationModal">AddPublicationModal</a></li><li><a href="global.html#AddPublicationModalInsertUsers">AddPublicationModalInsertUsers</a></li><li><a href="global.html#EditCard">EditCard</a></li><li><a href="global.html#EditCardNavBar">EditCardNavBar</a></li><li><a href="global.html#EditCardNavBarAddAuthor">EditCardNavBarAddAuthor</a></li><li><a href="global.html#EditCardNavBarAddAuthorSelect">EditCardNavBarAddAuthorSelect</a></li><li><a href="global.html#EditCardNavBarChangeContribution">EditCardNavBarChangeContribution</a></li><li><a href="global.html#EditCardNavBarEditInfo">EditCardNavBarEditInfo</a></li><li><a href="global.html#EditCardNavBarOrderOfAuthors">EditCardNavBarOrderOfAuthors</a></li><li><a href="global.html#PublicationCard">PublicationCard</a></li><li><a href="global.html#PublicationCardAuthors">PublicationCardAuthors</a></li><li><a href="global.html#PublicationCardInfo">PublicationCardInfo</a></li><li><a href="global.html#PublicationCardName">PublicationCardName</a></li><li><a href="global.html#SaveEditedPublication">SaveEditedPublication</a></li><li><a href="global.html#authorizedFetch">authorizedFetch</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#query">query</a></li><li><a href="global.html#reducer">reducer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Jul 14 2023 07:59:10 GMT+0200 (středoevropský letní čas)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
