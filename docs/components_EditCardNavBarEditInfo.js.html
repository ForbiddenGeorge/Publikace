<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/EditCardNavBarEditInfo.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/EditCardNavBarEditInfo.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState } from "react";
import { useSelector } from "react-redux";
// import { SaveEditedPublication } from "./SaveEditedPublicationButton";
import { PublicationUpdateMutation } from "querries/PublicationUpdateMutation";
import AlertPositive from "components/AlertPositive";
import AlertNegative from "components/AlertNegative";
/**
   * Komponenta pro úpravu informací o publikaci.
   *
   * @param {string} publicationId - ID publikace.
   * 
   * @returns {JSX.Element} - The rendered component
   */  
function EditCardNavBarEditInfo({ publicationId }) {
  
  const publications = useSelector((state) => state.publications); //pole všech publikací, z tohoto pole pak vyberu naši správnou publikaci
    const publicationTypes = useSelector((state) => state.publicationTypes) //Typy těch publikací
    const [publicationType, setPublicationType] = useState('');//Uložený vybraný typ publikace
    const selectedPublication = publications.find((publication) => publication.id === publicationId.publicationId); // konkrétní publikace se kterou pracujeme
    const [name, setName] = useState(''); // proměnná pro ukládání názvu
    const [place, setPlace] = useState(''); // proměnná pro ukládání místa
    const [reference, setReference] = useState(''); // proměnná pro ukládání reference

    const [showAlert, setShowAlert] = useState(false);
    const [showAlert1, setShowAlert1] = useState(false);
    const handleCloseAlert = () => {
          setShowAlert(false);
          setShowAlert1(false);
    };

    // Funkce při stisku tlačítka
    const handlePublicationUpdate = async () =>{
      try{
        // OŠETŘENÍ PRÁZDNÝCH MÍST
        // Pokud se při editaci (stisku tlačítka) nezmění jistá hodnota
        const updatedName = name || selectedPublication.name;
        const updatedType = publicationType || selectedPublication.publicationtype.id;
        const updatedReference = reference || selectedPublication.reference;
        const updatedPlace = place || selectedPublication.place;

        // VOLÁNÍ MUTACE
        PublicationUpdateMutation({ 
          pubId:selectedPublication.id,
          pubName:updatedName,
          pubLastChange: selectedPublication.lastchange,
          pubTypeId: updatedType,
          pubReference: updatedReference,
          pubPlace: updatedPlace
        })

        console.log('Publication edited successfully!');
        setShowAlert(true);
      }
      catch (error) {
        console.error('Error editing publication:', error);
        setShowAlert1(true);
      }
    }
    
    return (
        &lt;div className="container">
            &lt;div>
                &lt;label htmlFor="test" className="m-3">Jméno publikace&lt;/label>
            &lt;input onChange={(e) => setName(e.target.value)} placeholder={selectedPublication.name} id="test">&lt;/input>
            &lt;/div>
            &lt;div>
                &lt;label htmlFor="test" className="m-3">Reference&lt;/label>
            &lt;input onChange={(e) => setReference(e.target.value)} placeholder={selectedPublication.reference} id="test">&lt;/input>
            &lt;/div>
            &lt;div>
                &lt;label htmlFor="test" className="m-3">Místo&lt;/label>
            &lt;input onChange={(e) => setPlace(e.target.value)} placeholder={selectedPublication.place} id="test">&lt;/input>
            &lt;/div>
            &lt;select onChange={(e) => setPublicationType(e.target.value)} className="form-select" aria-label="Default select example" >
              &lt;option value={"Hej"}>
                  Seznam typů publikací
              &lt;/option>
              {publicationTypes.map((Type) => (
                &lt;option key={Type.id} value={Type.id}>
                  {Type.name}
                &lt;/option>
              ))}
            &lt;/select>            
            &lt;button type="button" className="btn bg-success text-white" onClick={handlePublicationUpdate}>Uložit&lt;/button>
            {showAlert &amp;&amp; &lt;AlertPositive info={"Publikace úspěšně upravena"} onClose={handleCloseAlert} />}
            {showAlert1 &amp;&amp; &lt;AlertNegative info={"Nepovedlo upravit publikaci"} onClose={handleCloseAlert} />}
        &lt;/div>
    );
}

export default EditCardNavBarEditInfo;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AddPublicationModal">AddPublicationModal</a></li><li><a href="global.html#AddPublicationModalInsertUsers">AddPublicationModalInsertUsers</a></li><li><a href="global.html#EditCard">EditCard</a></li><li><a href="global.html#EditCardNavBar">EditCardNavBar</a></li><li><a href="global.html#EditCardNavBarAddAuthor">EditCardNavBarAddAuthor</a></li><li><a href="global.html#EditCardNavBarAddAuthorSelect">EditCardNavBarAddAuthorSelect</a></li><li><a href="global.html#EditCardNavBarChangeContribution">EditCardNavBarChangeContribution</a></li><li><a href="global.html#EditCardNavBarEditInfo">EditCardNavBarEditInfo</a></li><li><a href="global.html#EditCardNavBarOrderOfAuthors">EditCardNavBarOrderOfAuthors</a></li><li><a href="global.html#PublicationCard">PublicationCard</a></li><li><a href="global.html#PublicationCardAuthors">PublicationCardAuthors</a></li><li><a href="global.html#PublicationCardInfo">PublicationCardInfo</a></li><li><a href="global.html#PublicationCardName">PublicationCardName</a></li><li><a href="global.html#SaveEditedPublication">SaveEditedPublication</a></li><li><a href="global.html#authorizedFetch">authorizedFetch</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#query">query</a></li><li><a href="global.html#reducer">reducer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Jul 14 2023 07:59:10 GMT+0200 (středoevropský letní čas)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
